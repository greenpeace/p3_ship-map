/** greenpeace-ship-map - 2014-03-24 */
"use strict";function makeSafeForCSS(a){return"undefined"==typeof a?"undefined":a.toLowerCase().replace(/[^a-z0-9]/g,function(a){var b=a.charCodeAt(0);return 32===b?"-":b>=65&&90>=b?"_"+a.toLowerCase():"__"+("000"+b.toString(16)).slice(-4)})}!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),!function(a,b,c){"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=c:(a[b]=c,"function"==typeof define&&define.amd&&define(b,[],function(){return c}))}(this,"jRespond",function(a,b,c){return function(a){var b=[],d=[],e=a,f="",g="",h=0,i=100,j=500,k=j,l=function(){var a=0;return a="number"!=typeof window.innerWidth?0!==document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth:window.innerWidth},m=function(a){if(a.length===c)n(a);else for(var b=0;b<a.length;b++)n(a[b])},n=function(a){var e=a.breakpoint,h=a.enter||c;b.push(a),d.push(!1),q(e)&&(h!==c&&h.call(null,{entering:f,exiting:g}),d[b.length-1]=!0)},o=function(){for(var a=[],e=[],h=0;h<b.length;h++){var i=b[h].breakpoint,j=b[h].enter||c,k=b[h].exit||c;"*"===i?(j!==c&&a.push(j),k!==c&&e.push(k)):q(i)?(j===c||d[h]||a.push(j),d[h]=!0):(k!==c&&d[h]&&e.push(k),d[h]=!1)}for(var l={entering:f,exiting:g},m=0;m<e.length;m++)e[m].call(null,l);for(var n=0;n<a.length;n++)a[n].call(null,l)},p=function(a){for(var b=!1,c=0;c<e.length;c++)if(a>=e[c].enter&&a<=e[c].exit){b=!0;break}b&&f!==e[c].label?(g=f,f=e[c].label,o()):b||""===f||(f="",o())},q=function(a){if("object"==typeof a){if(a.join().indexOf(f)>=0)return!0}else{if("*"===a)return!0;if("string"==typeof a&&f===a)return!0}},r=function(){var a=l();a!==h?(k=i,p(a)):k=j,h=a,setTimeout(r,k)};return r(),{addFunc:function(a){m(a)},getBreakpoint:function(){return f}}}}(this,this.document)),function(a,jQuery,b){function c(a,b){b&&b.onError&&b.onError(a)===!1||(this.name="JsRender Error",this.message=a||"JsRender error")}function d(a,b){var c;a=a||{};for(c in b)a[c]=b[c];return a}function e(a,b,c){return(!bb.rTag||arguments.length)&&(E=a?a.charAt(0):E,F=a?a.charAt(1):F,G=b?b.charAt(0):G,H=b?b.charAt(1):H,I=c||I,a="\\"+E+"(\\"+I+")?\\"+F,b="\\"+G+"\\"+H,B="(?:(?:(\\w+(?=[\\/\\s\\"+G+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+G+"]|\\"+G+"(?!\\"+H+"))*?)",bb.rTag=B+")",B=new RegExp(a+B+"(\\/)?|(?:\\/(\\w+)))"+b,"g"),C=new RegExp("<.*>|([^\\\\]|^)[{}]|"+a+".*"+b)),[E,F,G,H,I]}function f(a,c){c||(c=a,a=b);var d,e,f,g,h=this,i=!c||"root"===c;if(a){if(g=h.type===c?h:b,!g)if(d=h.views,h._.useKey){for(e in d)if(g=d[e].get(a,c))break}else for(e=0,f=d.length;!g&&f>e;e++)g=d[e].get(a,c)}else if(i)for(;h.parent.parent;)g=h=h.parent;else for(;h&&!g;)g=h.type===c?h:b,h=h.parent;return g}function g(){var a=this.get("item");return a?a.index:b}function h(a){var c,e=this,f=(e.ctx||{})[a];return f=f===b?e.getRsc("helpers",a):f,f&&"function"==typeof f&&(c=function(){return f.apply(e,arguments)},d(c,f)),c||f}function i(a,c,d){var e,f,g,h=+d===d&&d,i=c.linkCtx;return h&&(d=(h=c.tmpl.bnds[h-1])(c.data,c,Z)),g=d.args[0],(a||h)&&(f=i&&i.tag||{_:{inline:!i},tagName:a+":",flow:!0,_is:"tag"},f._.bnd=h,i&&(i.tag=f,f.linkCtx=i,d.ctx=x(d.ctx,i.view.ctx)),f.tagCtx=d,d.view=c,f.ctx=d.ctx||{},delete d.ctx,c._.tag=f,a="true"!==a&&a,a&&((e=c.getRsc("converters",a))||s("Unknown converter: {{"+a+":"))&&(f.depends=e.depends,g=e.apply(f,d.args)),g=h&&c._.onRender?c._.onRender(g,c,h):g,c._.tag=b),g}function j(a,c){var d,e=this,f=Z[a];for(d=f&&f[c];d===b&&e;)f=e.tmpl[a],d=f&&f[c],e=e.parent;return d}function k(a,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,t,u,v,w="",y=+f===f&&f,z=c.linkCtx||0,A=c.ctx,B=e||c.tmpl,C=c._;for("tag"===a._is&&(h=a,a=h.tagName),y&&(f=(t=B.bnds[y-1])(c.data,c,Z)),m=f.length,h=h||z.tag,l=0;m>l;l++)o=f[l],q=o.tmpl,q=o.content=q&&B.tmpls[q-1],e=o.props.tmpl,l||e&&h||(u=c.getRsc("tags",a)||s("Unknown tag: {{"+a+"}}")),e=e||(h?h._def:u).template||q,e=""+e===e?c.getRsc("templates",e)||$(e):e,d(o,{tmpl:e,render:r,index:l,view:c,ctx:x(o.ctx,A)}),h||(u._ctr?(h=new u._ctr,v=!!h.init,h.attr=h.attr||u.attr||b):h={render:u.render},h._={inline:!z},z&&(z.attr=h.attr=z.attr||h.attr,z.tag=h,h.linkCtx=z),(h._.bnd=t||z)&&(h._.arrVws={}),h.tagName=a,h.parent=k=A&&A.tag,h._is="tag",h._def=u),C.tag=h,o.tag=h,h.tagCtxs=f,h.flow||(p=o.ctx=o.ctx||{},i=h.parents=p.parentTags=A&&x(p.parentTags,A.parentTags)||{},k&&(i[k.tagName]=k),p.tag=h);for(h.rendering={},l=0;m>l;l++)o=h.tagCtx=f[l],h.ctx=o.ctx,!l&&v&&(h.init(o,z,h.ctx),v=b),(g=h.render)&&(n=g.apply(h,o.args)),w+=n!==b?n:o.tmpl?o.render():"";return delete h.rendering,h.tagCtx=h.tagCtxs[0],h.ctx=h.tagCtx.ctx,h._.inline&&(j=h.attr)&&"html"!==j&&(w="text"===j?_.html(w):""),y&&c._.onRender?c._.onRender(w,c,y):w}function l(a,c,d,e,i,k,l,m){var n,o,p,q="array"===c,r={key:0,useKey:q?0:1,id:""+U++,onRender:m,bnds:{}},s={data:e,tmpl:i,content:l,views:q?[]:{},parent:d,ctx:a,type:c,get:f,getIndex:g,getRsc:j,hlp:h,_:r,_is:"view"};return d&&(n=d.views,o=d._,o.useKey?(n[r.key="_"+o.useKey++]=s,p=o.tag,r.bnd=q&&(!p||!!p._.bnd&&p)):n.splice(r.key=s.index=k!==b?k:n.length,0,s),s.ctx=a||d.ctx),s}function m(a){var b,c,d,e,f;for(b in Y)if(e=Y[b],(f=e.compile)&&(c=a[b+"s"]))for(d in c)c[d]=f(d,c[d],a,b,e)}function n(a,b,c){var d,e;return"function"==typeof b?b={depends:b.depends,render:b}:((e=b.template)&&(b.template=""+e===e?$[e]||$(e):e),b.init!==!1&&(d=b._ctr=function(){},(d.prototype=b).constructor=d)),c&&(b._parentTmpl=c),b}function o(c,d,e,f,g,h){function i(b){if(""+b===b||b.nodeType>0){try{k=b.nodeType>0?b:!C.test(b)&&jQuery&&jQuery(a.document).find(b)[0]}catch(d){}return k&&(b=k.getAttribute(W),c=c||b,b=$[b],b||(c=c||"_"+T++,k.setAttribute(W,c),b=$[c]=o(c,k.innerHTML,e,f,g,h))),b}}var j,k;return d=d||"",j=i(d),h=h||(d.markup?d:{}),h.tmplName=c,e&&(h._parentTmpl=e),!j&&d.markup&&(j=i(d.markup))&&(!j.fn||j.debug===d.debug&&j.allowCode===d.allowCode||(j=j.markup)),j!==b?(c&&!e&&(X[c]=function(){return d.render.apply(d,arguments)}),j.fn||d.fn?j.fn&&(d=c&&c!==j.tmplName?x(h,j):j):(d=p(j,h),u(j,d)),m(h),d):void 0}function p(a,b){var c,e=cb.wrapMap||{},f=d({markup:a,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:r},b);return b.htmlTag||(c=Q.exec(a),f.htmlTag=c?c[1].toLowerCase():""),c=e[f.htmlTag],c&&c!==e.div&&(f.markup=z.trim(f.markup),f._elCnt=!0),f}function q(a,c){function d(f,g,h){var i,j,k,l;if(f&&""+f!==f&&!f.nodeType&&!f.markup){for(k in f)d(k,f[k],g);return Z}return g===b&&(g=f,f=b),f&&""+f!==f&&(h=g,g=f,f=b),l=h?h[e]=h[e]||{}:d,j=c.compile,(i=bb.onBeforeStoreItem)&&(j=i(l,f,g,j)||j),f?null===g?delete l[f]:l[f]=j?g=j(f,g,h,a,c):g:g=j(b,g),g&&(g._is=a),(i=bb.onStoreItem)&&i(l,f,g,j),g}var e=a+"s";Z[e]=d,Y[a]=c}function r(a,c,d,e,f,g){var h,i,j,k,m,n,o,p,q,r,t,u,v,w=this,y=!w.attr||"html"===w.attr,A="";if(e===!0&&(o=!0,e=0),w.tag?(p=w,w=w.tag,r=w._,u=w.tagName,v=p.tmpl,c=x(c,w.ctx),q=p.content,p.props.link===!1&&(c=c||{},c.link=!1),d=d||p.view,a=a===b?d:a):v=w.jquery&&(w[0]||s('Unknown template: "'+w.selector+'"'))||w,v&&(!d&&a&&"view"===a._is&&(d=a),d&&(q=q||d.content,g=g||d._.onRender,a===d&&(a=d.data,f=!0),c=x(c,d.ctx)),d&&d.data!==b||((c=c||{}).root=a),v.fn||(v=$[v]||$(v)),v)){if(g=(c&&c.link)!==!1&&y&&g,t=g,g===!0&&(t=b,g=d._.onRender),z.isArray(a)&&!f)for(k=o?d:e!==b&&d||l(c,"array",d,a,v,e,q,g),h=0,i=a.length;i>h;h++)j=a[h],m=l(c,"item",k,j,v,(e||0)+h,q,g),n=v.fn(j,m,Z),A+=k._.onRender?k._.onRender(n,m):n;else k=o?d:l(c,u||"data",d,a,v,e,q,g),r&&!w.flow&&(k.tag=w),A+=v.fn(a,k,Z);return t?t(A,k):A}return""}function s(a){throw new Z.sub.Error(a)}function t(a){s("Syntax error\n"+a)}function u(a,b,c,d){function e(b){b-=k,b&&m.push(a.substr(k,b).replace(L,"\\n"))}function f(b){b&&t('Unmatched or missing tag: "{{/'+b+'}}" in template:\n'+a)}function g(g,j,o,p,q,r,s,u,v,x,y,z){r&&(q=":",p="html"),x=x||c;var A,B,C=j&&[],D="",E="",F="",G=!x&&!q&&!s;o=o||q,e(z),k=z+g.length,u?i&&m.push(["*","\n"+v.replace(M,"$1")+"\n"]):o?("else"===o&&(P.test(v)&&t('for "{{else if expr}}" use "{{else expr}}"'),C=n[6],n[7]=a.substring(n[7],z),n=l.pop(),m=n[3],G=!0),v&&(v=v.replace(L," "),D=w(v,C,b).replace(O,function(a,b,c){return b?F+=c+",":E+=c+",",""})),E=E.slice(0,-1),D=D.slice(0,-1),A=E&&E.indexOf("noerror:true")+1&&E||"",h=[o,p||!!d||"",D,G&&[],'params:"'+v+'",props:{'+E+"}"+(F?",ctx:{"+F.slice(0,-1)+"}":""),A,C||0],m.push(h),G&&(l.push(n),n=h,n[7]=k)):y&&(B=n[0],f(y!==B&&"else"!==B&&y),n[7]=a.substring(n[7],z),n=l.pop()),f(!n&&y),m=n[3]}var h,i=b&&b.allowCode,j=[],k=0,l=[],m=j,n=[,,,j];return a=a.replace(N,"\\$&"),f(l[0]&&l[0][3].pop()[0]),a.replace(B,g),e(a.length),(k=j[j.length-1])&&f(""+k!==k&&+k[7]===k[7]&&k[0]),v(j,c?a:b,c)}function v(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,q,r,s,u,w,x,y,z,A,B,C,D,E,F=0,G="",H="",I={},J=a.length;for(""+b===b?(s=c?'data-link="'+b.replace(L," ").slice(1,-1)+'"':b,b=0):(s=b.tmplName||"unnamed",b.allowCode&&(I.allowCode=!0),b.debug&&(I.debug=!0),o=b.bnds,r=b.tmpls),d=0;J>d;d++)if(e=a[d],""+e===e)G+='\nret+="'+e+'";';else if(f=e[0],"*"===f)G+=""+e[1];else{if(g=e[1],h=e[2],x=e[3],i=e[4],H=e[5],y=e[7],(B="else"===f)||(F=0,o&&(q=e[6])&&(F=o.push(q))),(C=":"===f)?(g&&(f="html"===g?">":g+f),H&&(D="prm"+d,H="try{var "+D+"=["+h+"][0];}catch(e){"+D+'="";}\n',h=D)):(x&&(u=p(y,I),u.tmplName=s+"/"+f,v(x,u),r.push(u)),B||(w=f,A=G,G=""),z=a[d+1],z=z&&"else"===z[0]),i+=",args:["+h+"]}",C&&q||g&&">"!==f){if(E=new Function("data,view,j,u"," // "+s+" "+F+" "+f+"\n"+H+"return {"+i+";"),E.paths=q,E._ctxs=f,c)return E;n=1}if(G+=C?"\n"+(q?"":H)+(c?"return ":"ret+=")+(n?(n=0,m=!0,'c("'+g+'",view,'+(q?(o[F-1]=E,F):"{"+i)+");"):">"===f?(k=!0,"h("+h+");"):(l=!0,"(v="+h+")!="+(c?"=":"")+'u?v:"";')):(j=!0,"{tmpl:"+(x?r.length:"0")+","+i+","),w&&!z){if(G="["+G.slice(0,-1)+"]",(c||q)&&(G=new Function("data,view,j,u"," // "+s+" "+F+" "+w+"\nreturn "+G+";"),q&&((o[F-1]=G).paths=q),G._ctxs=f,c))return G;G=A+'\nret+=t("'+w+'",view,this,'+(F||G)+");",q=0,w=0}}G="// "+s+"\nvar j=j||"+(jQuery?"jQuery.":"js")+"views"+(l?",v":"")+(j?",t=j._tag":"")+(m?",c=j._cnvt":"")+(k?",h=j.converters.html":"")+(c?";\n":',ret="";\n')+(cb.tryCatch?"try{\n":"")+(I.debug?"debugger;":"")+G+(c?"\n":"\nreturn ret;\n")+(cb.tryCatch?"\n}catch(e){return j._err(e);}":"");try{G=new Function("data,view,j,u",G)}catch(K){t("Compiled template code:\n\n"+G,K)}return b&&(b.fn=G),G}function w(a,b,c){function d(d,m,n,o,p,q,r,s,v,x,y,z,A,B,C,D,I,K,L){function M(a,c,d,e,g,h,i){if(c&&(b&&!f&&b.push(o),"."!==c)){var j=(d?'view.hlp("'+d+'")':e?"view":"data")+(i?(g?"."+g:d?"":e?"":"."+c)+(h||""):(i=d?"":e?g||"":c,""));return j+=i?"."+i:"","view.data"===j.slice(0,9)?j.slice(5):j}return a}var N;return p=p||"",n=n||m||y,o=o||s,v=v||D||"",q?void t(a):(b&&C&&(N=i[j],L.length-2>K-N&&(N=L.slice(N,K+1),C=F+":"+N+G,C=g[C]=g[C]||u(E+C+H,c,!0),C.paths||w(N,C.paths=[],c),b.push({_jsvOb:C}))),l?(l=!z,l?d:'"'):k?(k=!A,k?d:'"'):(n?(j++,i[j]=K++,n):"")+(I?j?"":e?(e=f=!1,"\b"):",":r?(j&&t(a),e=o,f="~"===o.charAt(0),"\b"+o+":"):o?o.split("^").join(".").replace(J,M)+(v?(h[++j]=!0,"."!==o.charAt(0)&&(i[j]=K),v):p):p?p:B?(h[j--]=!1,B+(v?(h[++j]=!0,v):"")):x?(h[j]||t(a),","):m?"":(l=z,k=A,'"')))}var e,f,g=c.links,h={},i={0:-1},j=0,k=!1,l=!1;return(a+" ").replace(K,d)}function x(a,b){return a&&a!==b?b?d(d({},b),a):a:b&&d({},b)}function y(a){return V[a]||(V[a]="&#"+a.charCodeAt(0)+";")}if(!(jQuery&&jQuery.views||a.jsviews)){var z,A,B,C,D="v1.0.0-beta",E="{",F="{",G="}",H="}",I="^",J=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,K=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,L=/\s*\n/g,M=/\\(['"])/g,N=/['"\\]/g,O=/\x08(~)?([^\x08]+)\x08/g,P=/^if\s/,Q=/<(\w+)[>\s]/,R=/[\x00`><"'&]/g,S=R,T=0,U=0,V={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},W="data-jsv-tmpl",X={},Y={template:{compile:o},tag:{compile:n},helper:{},converter:{}},Z={jsviews:D,render:X,settings:{delimiters:e,debugMode:!0,tryCatch:!0},sub:{View:l,Error:c,tmplFn:u,parse:w,extend:d,error:s,syntaxError:t},_cnvt:i,_tag:k,_err:function(a){return cb.debugMode?"Error: "+(a.message||a)+". ":""}};(c.prototype=new Error).constructor=c,g.depends=function(){return[this.get("item"),"index"]};for(A in Y)q(A,Y[A]);var $=Z.templates,_=Z.converters,ab=(Z.helpers,Z.tags),bb=Z.sub,cb=Z.settings;jQuery?(z=jQuery,z.fn.render=r):(z=a.jsviews={},z.isArray=Array&&Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}),z.render=X,z.views=Z,z.templates=$=Z.templates,ab({"else":function(){},"if":{render:function(a){var b=this,c=b.rendering.done||!a&&(arguments.length||!b.tagCtx.index)?"":(b.rendering.done=!0,b.selected=b.tagCtx.index,b.tagCtx.render());return c},onUpdate:function(a,b,c){var d,e,f;for(d=0;(e=this.tagCtxs[d])&&e.args.length;d++)if(e=e.args[0],f=!e!=!c[d].args[0],e||f)return f;return!1},flow:!0},"for":{render:function(a){var c=this,d=c.tagCtx,e=!arguments.length,f="",g=e||0;return c.rendering.done||(e?f=b:a!==b&&(f+=d.render(a),g+=z.isArray(a)?a.length:1),(c.rendering.done=g)&&(c.selected=d.index)),f},onArrayChange:function(a,b){var c,d=this,e=b.change;if(this.tagCtxs[1]&&("insert"===e&&a.target.length===b.items.length||"remove"===e&&!a.target.length||"refresh"===e&&!b.oldItems.length!=!a.target.length))this.refresh();else for(c in d._.arrVws)c=d._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},flow:!0},include:{flow:!0},"*":{render:function(a){return a},flow:!0}}),_({html:function(a){return a!=b?String(a).replace(S,y):""},attr:function(a){return a!=b?String(a).replace(R,y):null===a?null:""},url:function(a){return a!=b?encodeURI(String(a)):null===a?null:""}}),e()}}(this,this.jQuery),function(a,b,c){a.jPanelMenu=function(d){var e=a(c),f=b.Modernizr||!1,g={options:a.extend({menu:"#menu",trigger:".menu-trigger",excludedPanelContent:"style, script",keepEventHandlers:!1,direction:"left",openPosition:"250px",animated:!0,closeOnContentClick:!0,keyboardShortcuts:[{code:27,open:!1,close:!0},{code:37,open:!1,close:!0},{code:39,open:!0,close:!0},{code:77,open:!0,close:!0}],duration:150,openDuration:d.duration||150,closeDuration:d.duration||150,easing:"ease-in-out",openEasing:d.easing||"ease-in-out",closeEasing:d.easing||"ease-in-out",before:function(){},beforeOpen:function(){},beforeClose:function(){},after:function(){},afterOpen:function(){},afterClose:function(){},beforeOn:function(){},afterOn:function(){},beforeOff:function(){},afterOff:function(){}},d||{}),settings:{transitionsSupported:"WebkitTransition"in c.body.style||"MozTransition"in c.body.style||"msTransition"in c.body.style||"OTransition"in c.body.style||"Transition"in c.body.style,transformsSupported:"WebkitTransform"in c.body.style||"MozTransform"in c.body.style||"msTransform"in c.body.style||"OTransform"in c.body.style||"Transform"in c.body.style,cssPrefix:"",shiftFixedChildren:!1,panelPosition:"relative",positionUnits:"px"},menu:"#jPanelMenu-menu",panel:".jPanelMenu-panel",fixedChildren:[],timeouts:{},clearTimeouts:function(){clearTimeout(g.timeouts.open),clearTimeout(g.timeouts.afterOpen),clearTimeout(g.timeouts.afterClose)},setPositionUnits:function(){var a=!1,b=["%","px","em"];for(var c in b){var d=b[c];g.options.openPosition.toString().substr(-d.length)===d&&(a=!0,g.settings.positionUnits=d)}a||(g.options.openPosition=parseInt(g.options.openPosition)+g.settings.positionUnits)},computePositionStyle:function(a,b){var c=a?g.options.openPosition:"0"+g.settings.positionUnits,d={};if(g.settings.transformsSupported){var e=a&&"right"===g.options.direction?"-":"",f="translate3d("+e+c+",0,0)",h="transform";b?(d="",""!==g.settings.cssPrefix&&(d=g.settings.cssPrefix+h+":"+f+";"),d+=h+":"+f+";"):(""!==g.settings.cssPrefix&&(d[g.settings.cssPrefix+h]=f),d[h]=f)}else b?(d="",d=g.options.direction+": "+c+";"):d[g.options.direction]=c;return d},setCSSPrefix:function(){g.settings.cssPrefix=g.getCSSPrefix()},checkFixedChildren:function(){g.disableTransitions();var b={position:a(g.panel).css("position")};if(b[g.options.direction]="auto"===a(g.panel).css(g.options.direction)?0:a(g.panel).css(g.options.direction),a(g.panel).find("> *").each(function(){"fixed"===a(this).css("position")&&"auto"===a(this).css(g.options.direction)&&g.fixedChildren.push(this)}),g.fixedChildren.length>0){var c={position:"relative"};c[g.options.direction]="1px",g.setPanelStyle(c),0===parseInt(a(g.fixedChildren[0]).offset().left)&&(g.settings.shiftFixedChildren=!0)}g.setPanelStyle(b)},setjPanelMenuStyles:function(){var b="#fff",c=a("html").css("background-color"),d=a("body").css("background-color");b="transparent"!==d&&"rgba(0, 0, 0, 0)"!==d?d:"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c?c:"#fff",0===a("#jPanelMenu-style-master").length&&a("body").append('<style id="jPanelMenu-style-master">body{width:100%}.jPanelMenu,body{overflow-x:hidden}#jPanelMenu-menu{display:block;position:fixed;top:0;'+g.options.direction+":0;height:100%;z-index:-1;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch}.jPanelMenu-panel{position:static;"+g.computePositionStyle(!1,!0)+"z-index:2;width:100%;min-height:100%;background:"+b+"}</style>")},setMenuState:function(b){var c=b?"open":"closed";a("body").attr("data-menu-position",c)},getMenuState:function(){return a("body").attr("data-menu-position")},menuIsOpen:function(){return"open"===g.getMenuState()?!0:!1},setMenuStyle:function(b){a(g.menu).css(b)},setPanelStyle:function(b){a(g.panel).css(b)},showMenu:function(){g.setMenuStyle({display:"block"}),g.setMenuStyle({"z-index":"1"})},hideMenu:function(){g.setMenuStyle({"z-index":"-1"}),g.setMenuStyle({display:"none"})},enableTransitions:function(b,c){var d=b/1e3,e=g.getCSSEasingFunction(c);g.disableTransitions(),a("body").append('<style id="jPanelMenu-style-transitions">.jPanelMenu-panel{'+g.settings.cssPrefix+"transition: all "+d+"s "+e+"; transition: all "+d+"s "+e+";}</style>")},disableTransitions:function(){a("#jPanelMenu-style-transitions").remove()},enableFixedTransitions:function(b,c,d,e){var f=d/1e3,h=g.getCSSEasingFunction(e);g.disableFixedTransitions(c),a("body").append('<style id="jPanelMenu-style-fixed-'+c+'">'+b+"{"+g.settings.cssPrefix+"transition: all "+f+"s "+h+"; transition: all "+f+"s "+h+";}</style>")},disableFixedTransitions:function(b){a("#jPanelMenu-style-fixed-"+b).remove()},getCSSEasingFunction:function(a){switch(a){case"linear":return a;case"ease":return a;case"ease-in":return a;case"ease-out":return a;case"ease-in-out":return a;default:return"ease-in-out"}},getJSEasingFunction:function(a){switch(a){case"linear":return a;default:return"swing"}},getVendorPrefix:function(){if(f&&f.hasOwnProperty("prefixed"))return f.prefixed("transform").replace("transform","");if("result"in arguments.callee)return arguments.callee.result;var a=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,b=c.getElementsByTagName("script")[0];for(var d in b.style)if(a.test(d))return arguments.callee.result=d.match(a)[0],arguments.callee.result;return arguments.callee.result="WebkitOpacity"in b.style?"Webkit":"KhtmlOpacity"in b.style?"Khtml":"",arguments.callee.result},getCSSPrefix:function(){var a=g.getVendorPrefix();return""!==a?"-"+a.toLowerCase()+"-":""},openMenu:function(b){("undefined"==typeof b||null===b)&&(b=g.options.animated),g.clearTimeouts(),g.options.before(),g.options.beforeOpen(),g.setMenuState(!0),g.setPanelStyle({position:"relative"}),g.showMenu();var c={none:b?!1:!0,transitions:b&&g.settings.transitionsSupported?!0:!1};if(c.transitions||c.none){c.none&&g.disableTransitions(),c.transitions&&g.enableTransitions(g.options.openDuration,g.options.openEasing);var d=g.computePositionStyle(!0);g.setPanelStyle(d),g.settings.shiftFixedChildren&&a(g.fixedChildren).each(function(){var b=a(this).prop("tagName").toLowerCase()+" "+a(this).attr("class"),d=b.replace(" ","."),e=b.replace(" ","-"),f={};c.none&&g.disableFixedTransitions(e),c.transitions&&g.enableFixedTransitions(d,e,g.options.openDuration,g.options.openEasing),f[g.options.direction]=g.options.openPosition,a(this).css(f)}),g.timeouts.afterOpen=setTimeout(function(){g.disableTransitions(),g.settings.shiftFixedChildren&&a(g.fixedChildren).each(function(){var b=a(this).prop("tagName").toLowerCase()+" "+a(this).attr("class");g.disableFixedTransitions(b.replace(" ","-"))}),g.options.after(),g.options.afterOpen(),g.initiateContentClickListeners()},g.options.openDuration)}else{var e=g.getJSEasingFunction(g.options.openEasing),f={};f[g.options.direction]=g.options.openPosition,a(g.panel).stop().animate(f,g.options.openDuration,e,function(){g.options.after(),g.options.afterOpen(),g.initiateContentClickListeners()}),g.settings.shiftFixedChildren&&a(g.fixedChildren).each(function(){var b={};b[g.options.direction]=g.options.openPosition,a(this).stop().animate(b,g.options.openDuration,e)})}},closeMenu:function(b){("undefined"==typeof b||null===b)&&(b=g.options.animated),g.clearTimeouts(),g.options.before(),g.options.beforeClose(),g.setMenuState(!1);var c={none:b?!1:!0,transitions:b&&g.settings.transitionsSupported?!0:!1};if(c.transitions||c.none){c.none&&g.disableTransitions(),c.transitions&&g.enableTransitions(g.options.closeDuration,g.options.closeEasing);var d=g.computePositionStyle();g.setPanelStyle(d),g.settings.shiftFixedChildren&&a(g.fixedChildren).each(function(){var b=a(this).prop("tagName").toLowerCase()+" "+a(this).attr("class"),d=b.replace(" ","."),e=b.replace(" ","-"),f={};c.none&&g.disableFixedTransitions(e),c.transitions&&g.enableFixedTransitions(d,e,g.options.closeDuration,g.options.closeEasing),f[g.options.direction]=0+g.settings.positionUnits,a(this).css(f)}),g.timeouts.afterClose=setTimeout(function(){g.setPanelStyle({position:g.settings.panelPosition}),g.disableTransitions(),g.settings.shiftFixedChildren&&a(g.fixedChildren).each(function(){var b=a(this).prop("tagName").toLowerCase()+" "+a(this).attr("class");g.disableFixedTransitions(b.replace(" ","-"))}),g.hideMenu(),g.options.after(),g.options.afterClose(),g.destroyContentClickListeners()},g.options.closeDuration)}else{var e=g.getJSEasingFunction(g.options.closeEasing),f={};f[g.options.direction]=0+g.settings.positionUnits,a(g.panel).stop().animate(f,g.options.closeDuration,e,function(){g.setPanelStyle({position:g.settings.panelPosition}),g.hideMenu(),g.options.after(),g.options.afterClose(),g.destroyContentClickListeners()}),g.settings.shiftFixedChildren&&a(g.fixedChildren).each(function(){var b={};b[g.options.direction]=0+g.settings.positionUnits,a(this).stop().animate(b,g.options.closeDuration,e)})}},triggerMenu:function(a){g.menuIsOpen()?g.closeMenu(a):g.openMenu(a)},initiateClickListeners:function(){e.on("click",g.options.trigger,function(){return g.triggerMenu(g.options.animated),!1})},destroyClickListeners:function(){e.off("click",g.options.trigger,null)},initiateContentClickListeners:function(){return g.options.closeOnContentClick?(e.on("click",g.panel,function(){g.menuIsOpen()&&g.closeMenu(g.options.animated)}),void e.on("touchend",g.panel,function(){g.menuIsOpen()&&g.closeMenu(g.options.animated)})):!1},destroyContentClickListeners:function(){return g.options.closeOnContentClick?(e.off("click",g.panel,null),void e.off("touchend",g.panel,null)):!1},initiateKeyboardListeners:function(){var b=["input","textarea"];e.on("keydown",function(c){var d=a(c.target),e=!1;if(a.each(b,function(){d.is(this.toString())&&(e=!0)}),e)return!0;for(var f in g.options.keyboardShortcuts)if(c.which===g.options.keyboardShortcuts[f].code){var h=g.options.keyboardShortcuts[f];return h.open&&h.close?g.triggerMenu(g.options.animated):!h.open||h.close||g.menuIsOpen()?!h.open&&h.close&&g.menuIsOpen()&&g.closeMenu(g.options.animated):g.openMenu(g.options.animated),!1}})},destroyKeyboardListeners:function(){e.off("keydown",null)},setupMarkup:function(){a("html").addClass("jPanelMenu"),a("body > *").not(g.menu+", "+g.options.excludedPanelContent).wrapAll('<div class="'+g.panel.replace(".","")+'"/>'),a(g.options.menu).clone(g.options.keepEventHandlers).attr("id",g.menu.replace("#","")).insertAfter("body > "+g.panel)},resetMarkup:function(){a("html").removeClass("jPanelMenu"),a("body > "+g.panel+" > *").unwrap(),a(g.menu).remove()},init:function(){g.options.beforeOn(),g.setPositionUnits(),g.setCSSPrefix(),g.initiateClickListeners(),"[object Array]"===Object.prototype.toString.call(g.options.keyboardShortcuts)&&g.initiateKeyboardListeners(),g.setjPanelMenuStyles(),g.setMenuState(!1),g.setupMarkup(),g.setMenuStyle({width:g.options.openPosition}),g.settings.transformsSupported||g.checkFixedChildren(),g.closeMenu(!1),g.options.afterOn()},destroy:function(){g.options.beforeOff(),g.closeMenu(),g.destroyClickListeners(),"[object Array]"===Object.prototype.toString.call(g.options.keyboardShortcuts)&&g.destroyKeyboardListeners(),g.resetMarkup();var b={};b[g.options.direction]="auto",a(g.fixedChildren).each(function(){a(this).css(b)}),g.fixedChildren=[],g.options.afterOff()}};return{on:g.init,off:g.destroy,trigger:g.triggerMenu,open:g.openMenu,close:g.closeMenu,isOpen:g.menuIsOpen,menu:g.menu,getMenu:function(){return a(g.menu)},panel:g.panel,getPanel:function(){return a(g.panel)}}}}(jQuery,this,document);